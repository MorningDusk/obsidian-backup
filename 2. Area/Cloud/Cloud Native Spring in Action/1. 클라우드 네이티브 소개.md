---
date: 2025-04-29
tags:
  - cloud
  - native
---
![[Pasted image 20250429173248.png]]
# 1. 클라우드 네이티브란 무엇인가?
폴 프리맨틀에 따르면 클라우드 네이티브<sub>Cloud Native</sub> 애플리케이션이 클라우드를 위해 특별히 설계되어야 하고, 클라우드 환경과 클라우드 컴퓨팅 모델의 장점을 활용할 수 있는 특성이 있어야 한다. 클라우드가 아닌 환경에서 실행되도록 설계된 기존 애플리케이션을 클라우드로 옮기는 것을 '리프트 및 시프트<sub>lift and shift</sub>' 접근 방식이라고 하는데 이렇게 한다고 해서 애플리케이션이 클라우드 **네이티브**가 되는 것은 아니다. 
## 1.1. 클라우드 네이티브에서의 세 가지 P
클라우드 네이티브 컴퓨팅 제단<sub>Cloud Native Computing Foundation, CNCF</sub>은 클라우드 네이티브에 대해 정의를 이렇게 한다. [^1]
> 기업체와 같은 조직에서 클라우드 네이티브 기술을 사용하면 공용, 사설 및 하이브리드 클라우드와 같은 현대적이고 동적인  환경에서 확장 가능한 애플리케이션을 구축하고 실행할 수 있다. 이러한 접근 방식의 예로는 컨테이너, 서비스 메시, 마이크로서비스, 불가변 인프라, 선언적 API를 들 수 있다.
> 느슨하게 결합된 시스템에서 이러한 기술을 사용하면 복원력이 뛰어나고 관리가 용이하며 관찰 가능한 시스템을 만들 수 있다. 이것이 강력한 자동화와 결합되면 엔지니어들은 최소의 노력만으로도 큰 영향을 끼치는 변경을 자주 그리고 예측 가능한 방식으로 할 수 있다.

1. **플랫폼** (Platform): 클라우드 네이티브 애플리케이션은 클라우드(공용, 사설 또는 하이브리드) 같은 동적 분산 환경을 기반으로 하는 플랫폼에서 실행된다
2. **속성** (Property): 클라우드 네이티브 애플리케이션은 확장 가능하고 느슨하게 결합되며 복원력이 뛰어나고 관리가 용이하며 관찰 가능하도록 설계된다
3. **실행** (Practice): 견고한 자동화를 통해 빈번하고 예측 가능한 방식으로 시스템을 변경하는 것이 여기에 포함되는데 자동화, 지속적 전달, 데브옵스 등이 있다 
# 2. 클라우드와 클라우드 컴퓨팅 모델
클라우드는 클라우드 컴퓨팅 모델에 따라 컴퓨팅 자원을 소비자에게 제공하는 IT 인프라이다. 스스로 전기를 생산하는 것이 아니라 공급자에게 전기를 얻어 사용하는 것처럼 클라우드를 통해 컴퓨팅 자원을 일종의 소비재처럼 받아 사용하는 것이다.
클라우드 공급자는 클라우드 인프라를 내부적으로 관리하기 때문에 소비자 입장에서는 서버 하드웨어나 네트워크 같은 물리적 자원에 신경 쓸 필요가 없다. 
이 모델에서 **탄력성**<sub>elasticity</sub>은 주요 특징 중 하나인데, 컴퓨팅 자원은 필요에 따라 동적으로 더 많이 제공하거나 회수할 수 있다.
> [!info] 탄력성
> 자율적으로 리소스를 제공하거나 회수에서 시스템이 어느 정도로 워크로드의 변화에 적응할 수 있는지를 나타내는 지표이다. 클라우드  컴퓨팅 모델을 사용하면 컴퓨팅 리소스의 사용량을 모터링하고 실제로 사용하는 것에 대해서만 비용을 지불하면 된다.
- **사설 클라우드** <sub>Private Cloud</sub>: 한 단체에나 조직에서만 사용하도록 제공하는 클라우드 인프라이다. 해당 조직이나 단체가 관리하거나 제 3자에 의해 관리될 수 있으며, 호스팅은 외주로 하나 자체적으로 할 수 있다. 일반적으로 중요한 데이터 또는 매우 중요한 시스템을 다루는 조직에서 선호하는 방법이다. 
- **공공 클라우드** <sub>Public Cloud</sub>: 일반 사용자들에게 공공으로 제공되는 클라우드 인프라이다. 일반적으로 클라우드 공급자가 소유하고 관리하며 공급자가 제어하고 관리하는 장소에서 호스팅한다. 
- **하이브리드 클라우드**<sub>Hybrid Cloud</sub>: 위의 두 가지 유형에 해당하는 클라우드 인프라 구성 몇 개를 하나로 묶어 마치 하나의 단일 환경인 것처럼 서비스를 제공한다. [^2]
클라우드 컴퓨팅 모델이 제공하는 서비스 모델은 소비자에게 제공되는 기능에 따라 다섯 가지로 나눌 수 있다. 이 중 어떤 서비스 모델을 선택할지는 인프라에 대한 제어가 어느 정도 필요한지 그리고 관리할 컴퓨팅 리소스 유형이 무엇인지에 따라 달라진다. [^3]
![[Pasted image 20250429202333.png]]
## 2.1. 서비스형 인프라스트럭처 Infrastructure as a Service, IaaS
사용자는 서버, 스토리지 및 네트워크와 같은 자원을 직접 제어하고 제공할 수 있다. 예를 들어 가상 서버를 구축하고 운영체제 및 라이브러리와 같은 소프트웨어도 설치할 수 있다. 
IaaS 제품의 예로는 AWS의 일래스틱 컴퓨팅 클라우드<sub>Elastic Compute Cloud, EC2</sub>, 애저 가상 머신<sub>Azure Virtual Machine</sub>, 구글 컴퓨트 엔진<sub>Google Compute Engine</sub>, 알리바바 가상 머신<sub>Alibaba Virtual Machine</sub>, 디지털오션 드롭릿<sub>DigitalOcean Droplet</sub>이 있다.
## 2.2. 서비스형 컨테이너 Container as a Service, CaaS
사용자는 가상화를 위한 기본 리소스를 제어할 수 없고 대신 컨테이너를 만들고 관리한다. 클라우드 공급자는 이러한 컨테이너의 요구를 충족하기 위해 필요한 기본 리소스를 제공하는데, 예를 들어 새로운 가상 머신을 만들고 인터넷을 통해 액세스할 수 있도록 네트워크를 구성해준다. 컨테이너 플랫폼을 구축하는데 사용되는 도구의 예로는 도커 스웜<sub>Docker Swarm</sub>, 아파치 메소스<sub>Apache Mesos</sub>, 쿠버네티스<sub>Kubernetes</sub>가 있다.
## 2.3. 서비스형 플랫폼 Platform as a Service, PaaS
클라우드 공급자가 인프라, 도구, API를 제공하고 개발자는 이를 사용해 애플리케이션을 빌드하고 배포한다. 예를 들어 개발자는 자바 애플리케이션을 빌드하고 JAR<sub>Java Archive</sub> 파일로 패키징한 다음, PaaS 모델로 실행되고 있는 플랫폼에 배포할 수 있다. 이 플랫폼은 자바 런타임, 기타 필수 미들웨어를 제공하며 데이터베이스 또는 메시징 시스템과 같은 추가 서비스도 제공할 수 있다. PaaS 제품의 예로는 클라우드 파운드리<sub>Cloud Foundry</sub>, 히로쿠<sub>Heroku</sub>, AWS 일래스틱 빈스토크<sub>Elastic Beanstalk</sub>, 애저 앱 서비스<sub>App Service</sub>, 구글의 앱 엔진<sub>App Engine</sub>, 알리바바의 웹 앱 서비스<sub>Web App Service</sub> 및 디지털오션의 앱 플랫폼<sub>App Platform</sub>이 있다. 
## 2.4. 서비스형 함수 Funtion as a Service, FaaS
서버리스 컴퓨팅을 사용하면 사용자는 함수의 형태로 자신의 애플리케이션의 비즈니스 로직을 구현하는 데만 집중할 수 있고, 플랫폼은 서버 및 나머지 인프라를 제공한다. 서버리스 애플리케이션은 HTTP 요청이나 메시지와 같은 이벤트가 발생하면 실행되게 할 수 있다. 상용 FaaS 제품의 예로는 아마존 AWS 람다<sub>Amazon AWS Lambda</sub>, 마이크로소프트 애저 함수<sub>Microsoft Azure Function</sub>, 구글 클라우드 함수<sub>Google Cloud Function</sub>, 알리바바 함수 컴퓨트<sub>Alibaba Funtions Compute</sub>가 있다. 
## 2.5. 서비스형 소프트웨어 Software as a Service, SaaS
소비자는 사용자로서 애플리케이션에 액세스하고 클라우드 공급자는 소프트웨어 및 인프라 스택 전체를 관리한다. SaaS의 예로는 프로톤 메일<sub>Proton Mail</sub>, 깃허브<sub>GitHub</sub>, 플로저블 애널리틱스<sub>Plausible Analytics</sub>, 마이크로소프트의 오피스 365 등이 있다.
# 3. 클라우드 네이티브 애플리케이션의 특성
![[Pasted image 20250429224555.png]]
## 3.1. 확장성
클라우드 네이티브 애플리케이션은 확장이 가능하도록 설계되는데, 즉 추가 리소스를 제공해 증가하는 워크로드를 지원한다는 것이다.
- **수직적 확장**<sub>vertical scalability</sub>: 수직적 확장(위/아래<sub>scaling up/down</sub> 확장)은 CPU나 메모리와 같은 컴퓨팅 노드에 하드웨어 리소스를 추가하거나 제거하는 것을 의미한다. 하드웨어 리소를 무한정 추가할 수는 없기 때문에 이 방식은 제한적으로 이루어진다. 이 접근 방식에는 애플리케이션 자체를 확장 혹은 축소하도록 명시적으로 설계할 필요는 없다
- **수평적 확장**<sub>horizontal scalability</sub>: 수평적 확장(확대/축소<sub>scaling out/in</sub>)은 시스템에 더 많은 컴퓨팅 노드나 컨테이너를 추가하는 것을 의미한다. 이 접근 방식은 수직적 확장에서와 같은 제한은 없지만, 애플리케이션이 확장 가능하도록 만들어야 한다
전통적인 시스템은 워크로드가 증가할 경우 일반적으로 수직적 확장을 체택한다. 수직적 확장은 애플리케이션이 더 많은 사용자를 지원하도록 하기 위해 일반적으로 취할 수 있는 접근 방식으로 단순히 CPU와 메모리를 추가하면 되기 때문에 확장성을 고려해 설계하거나 확장성을 향상하기 위해 재설계를 하지 않아도 된다. 
하지만 모든 것이 역동적이고 끊임없이 변화하는 클라우드에서는 수평적 확장을 선호한다. 이미 실행 중인 컴퓨터의 연산 능력을 높이기보다는 애플리케이션의 인스턴스를 새로 만들어내는 것이 쉬운데 이러한 일은 클라우드 컴퓨팅 모델이 제공하는 추상화 수준 덕분에 가능하다. 클라우드는 탄력적이기 때문에 동적으로 애플리케이션 인스턴스를 늘리거나 줄일 수 있다.
![[Pasted image 20250429235255.png]]
확장성의 큰 장애물은 애플리케이션 상태인데, 상태를 갖는지<sub>stateful</sub> 아니면 상태를 갖지 않는지<sub>stateless</sub>의 문제로 귀결된다. 
## 3.2. 느슨한 결합
각 컴포넌트들이 가능한 한 다른 컴포넌트에 대한 지식을 거의 가지고 있지 않은 시스템이 본질적으로 가지고 있는 속성이 **느슨한 결합**<sub>loose coupling</sub>이다. 각 컴포넌트는 독립적으로 진화해나가고 그 결과 한 컴포넌트가 바뀐다고 해서 그에 맞춰 다른 부분까지 변경할 필요가 없도록 하는 것을 목표로 한다.
**결합**<sub>coupling</sub>과 **응집력**<sub>cohesion</sub>이라는 두 가지 개념은 소프트웨어 엔지니어링에서 필수적인 역할을 해왔다. 시스템을 모듈로 분해하고(**모듈화**<sub>modularization</sub>), 다른 부분에 대한 의존성을 최소화해(느슨한 결합), 함께 변화하는 코드를 캡슐화하는(높은 응집력) 것은 좋은 설계 방법이다. 아키텍처 스타일에 따라 모듈은 하나의 거대한<sub>monolithic</sub> 구성 요소 혹은 독립적 서비스로 모델링할 수 있다. 
파르나스<sub>Parnas</sub>는 모듈화의 세 가지 이점을 다음과 같이 설명한다.
- 관리<sub>managerial</sub>: 각 모듈이 느슨하게 결합되어 있기 때문에, 각 모듈을 담당하는 팀은 서로 간의 조정과 의사소통에 많은 시간을 할애할 필요가 없다
- 제품 유연성<sub>product flexibility</sub>: 각 모듈은 다른 모듈과 독립적으로 진화하기 때문에 전체 시스템은 유연하다
- 이해력<sub>comprehensibility</sub>: 전체 시스템을 이해할 필요 없이 하나의 모듈만 이해하고 작업할 수 있다
밀접하게 결합되고 비응집성을 갖는 컴포넌트로 구성된 시스템을 마이크로서비스로 변경하면 그 결과는 단단히 결합되고 비응집성을 갖는 마이크로서비스가 될 뿐이다. 이런 시스템을 **분산된 모놀리스**<sub>distributed monolith</sub> 또는 **모듈식 모놀리스**<sub>modular monolith</sub>라고 부르기도 한다. 
## 3.3. 복원력
**복원력**<sub>resilience</sub>은 '정상 작동에 대한 오류 및 문제에 직면하여 허용 가능한 수준의 서비스를 제공하고 유지할 수 있도록 하는 하드웨어-소프트웨어 기능'이다. 
클라우드 네이티브 시스템을 구축할 때, 인프라건 소프트웨어건 장애가 발생하더라도 애플리케이션은 언제나 사용할 수 있도록 보장하는 것을 목표로 해야 한다. 클라우드 네이티브 애플리케이션은 모든 것이 끊임없이 변화하고, 이에 더해 결함이 발생할 가능성과 함께 결함이 실제 발생하기도 하는 동적 환경에서 실행된다. 
- **결함**<sub>fault</sub>: 소프트웨어 또는 인프라에서 잘못된 내부 상태를 생성하는 고장이다. 예를 들면 메서드 호출 시 널이 아닌 값을 반환해야 하는 경우에도 널 값을 반환하는 경우다
- **오류**<sub>error</sub>:  시스템에 대해 예상하는 작동과 시스템이 실제 보이는 작동 간의 불일치다. 예를 들자면 위에서 언급한 결함으로 인해 `NullPointerException`이 발생하는 경우다
- **실패**<sub>failure</sub>: 결함이 촉발되어 오류가 발생하면 실패로 이어져 시스템이 응답하지 않거나 요구 사양에 따라 작동하지 못하게 될 수 있다. 예를 들면 `NullPointerException`이 적절하 처리되지 못하면 이 오류는 실패를 유발하고 시스템은 모든 요청에 대해 500 코드로 응답하게 된다.
결함은 오류가 될 수 있으며, 이는 실패로 이어질 수 있기 때문에 애플리케이션은 **내결함성**<sub>fault tolerant</sub>을 갖도록 설계해야 한다. 복원력에서 필수적인 부분은 한 부분에서 실패가 일어나더라도 시스템의 다른 구성 요소에 영향을 끼치지 않아야 하고, 실패가 발생한 부분은 해결이 될 때까지 격리 상태를 유지해야 한다는 점이다. 시스템은 또한 **자가 수리**<sub>self-repairing</sub>되거나 **자가 치유**<sub>self-healing</sub> 되는 것이 바람직한데, 클라우드 모델은 실제로 이것을 가능하게 할 수 있다.
## 3.4. 관측 가능성
**관측 가능성**<sub>observability</sub>은 제어 이론에서 비롯한 속성이다. 어떤 한 시스템을 고려한다면, 관측 가능성은 그 시스템의 외부 출력에서 내부 상태를 얼마나 잘 추론할 수 있는지를 측정하는 것이다. 외부 출력은 측정값<sub>metric</sub>, 로그<sub>log</sub>, 트레이스<sub>trace</sub>와 같은 데이터가 될 수 있다.
![[Pasted image 20250502000756.png]]
- **모니터링**<sub>monitoring</sub>: 애플리케이션의 전반적인 상태에 대한 정보를 얻고 실패를 식별하기 위해 애플리케이션의 특정 양상을 측정하는 것이다
- **경고/시각화**<sub>altering/visualization</sub>: 시스템 상태에 대한 데이터 수집은 수집된 데이터로 무언가 조치를 취하는 것으로 이어져야 유용하다. 애플리케이션을 모니터링하는 동안 오류가 식별되면 경고를 보낼 수 있어야 하고, 이를 처리하기 위한 조치가 이루어져야 한다
- **인프라를 추적하는 분산 시스템**<sub>distributed systems tracing infrastructure</sub>: 분산 시스템에서는 모든 서브 시스템 내의 작동을 추적하는 것만으로는 충분하지 않다. 서로 다른 서브시템 사이에서 흐르는 데이터를 추적하는 것 역시 필수적이다. 
- **로그 집계/분석**: 애플리케이션의 주요 이벤트를 추적하는 것은 소프트웨어의 작동을 추론하고 문제 발생 시 디버깅을 하기 위해 중요한 작업이다. 클라우드 네이티브 시스템에서는 로그를 집계하고 수집하여 시스템 작동에 대한 더 나은 데이터를 제공하고, 해당 데이터에서 정보를 찾아내기 위해 분석을 수행할 수 있어야 한다.
## 3.5. 관리 용이성
**관리 용이성**<sub>manageability</sub>은 외부 입력이 시스템의 상태 또는 출력을 얼마나 쉽고 효율적으로 변경할 수 있는지에 대한 것이다. 즉, 코드를 바꾸지 않고도 애플리케이션의 작동을 수정할 수 있는 능력이다. 다만 **유지 보수성**<sub>maintainability</sub>은 코드 변경을 통해 내부적으로 시스템을 얼마나 쉽고 효율적으로 변경할 수 있는지에 관한 것이다.
관리 용이성의 한 측면으로 전체 시스템을 계속 실행하면서 동시에 애플리케이션을 배포하고 업데이트하는 것이 있다. 클라우드 네이티브 애플리케이션이 코드를 변경하거나 새로운 릴리스를 빌드하지 않고도 시스템의 작동을 수정할 수 있도록 설정하는 것이 바람직하다. 데이터 소스 URL, 유저명이나 패스워드 같은 인증 데이터, 인증서와 같은 세팅은 설정을 통해 하는 것이 일반적이다. 
관리 용이성은 변경 그 자체뿐 아니라 그 변경을 얼마나 쉽고 효율적으로 할 수 있는가에 관한 것이기도 하다. 클라우드 네이티브 시스템은 복잡하기 때문에 기능, 환경, 보안과 관련해 변화하는 요구 사항에 적응할 수 있는 애플리케이션을 설계하는 것이 필수적이다.
# 4. 클라우드 네이티브를 지원하는 문화 및 관행
![[Pasted image 20250502194710.png]]
## 4.1. 자동화
**자동화**<sub>automation</sub>는 클라우드 네이티브의 핵심이다. 이것은 반복적인 수동 작업을 자동화해 클라우드 네이티브 애플리케이션을 빠르게 배포하자는 아이디어에 기반한다. 



[^1]: Cloud Native Computing Foundation, "CNCF Cloud Native Definition v1.0", http://mng.bz/de1w

[^2]: [[1장 쉽게 시작하는 클라우드#클라우드 서비스 운용 형태]]도 참고

[^3]: [[1장 쉽게 시작하는 클라우드#클라우드 컴퓨팅 서비스 유형]]도 참고
